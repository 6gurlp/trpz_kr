# CI Server (course project)

Простий Spring Boot застосунок, що надає базовий функціонал CI-сервера з веб-UI:
- створення пайплайнів з Git-репозиторієм, гілкою та YAML-визначенням стадій;
- запуск пайплайна (клонує репозиторій, виконує послідовні стадії shell-команд, збирає лог і візуалізує послідовність);
- перегляд історії запусків і логів у браузері.



## Обмеження платформи

⚠️ Застосунок працює **лише в Linux-середовищі**  
(у тому числі **WSL — Windows Subsystem for Linux**).

## Швидкий старт
1. Встановіть Java 17+ і git.
2. Запустіть застосунок:
   ```bash
   ./mvnw spring-boot:run
   ```
3. Відкрийте http://localhost:8080 — у браузері доступний UI для керування пайплайнами.

### Робота з пайплайнами
- Заповніть форму «Новий пайплайн»: назва, URL репозиторію, гілка (за замовчуванням `main`), YAML-опис стадій. Наприклад:
  ```yaml
  stages:
    - name: compile
      run: make compile
    - name: test
      run: make test
  ```
- Натисніть «Зберегти пайплайн» — його буде створено в базі (H2 in-memory за замовчуванням).
- У таблиці натискайте «Запустити», щоб створити новий прогін. Після завершення лог буде доступний у блоці «Запуски».

### Використані патерни
- **Command**: кожен крок пайплайна (клонирование репозиторію, виконання скрипту) інкапсульовано в команді (`pipeline.execution.command`).
- **Visitor**: `CommandPlanVisitor` проходить по списку команд та формує читабельний план виконання, який додається до логу.
- **State**: `PipelineRunStateMachine` відповідає за переходи станів прогона (QUEUE → RUNNING → SUCCESS/FAILED) і виставляє часові мітки.

### Налаштування бази
За замовчуванням використовується H2 in-memory (див. `src/main/resources/application.yml`). За потреби змініть параметри `spring.datasource.*` на MySQL/PostgreSQL та оновіть `ddl-auto`.
